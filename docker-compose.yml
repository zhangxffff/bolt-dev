services:
  dev:
    container_name: bolt-dev
    image: bolt-dev

    # 自动从当前目录构建镜像（使用你的 Dockerfile）
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # 下面三个参数会传给 Dockerfile 里的 ARG
        # 没有设置环境变量时，使用冒号后面的默认值
        USERNAME: ${DEV_USERNAME:-zhangxffff}
        UID: ${DEV_UID:-1000}
        GID: ${DEV_GID:-1000}

    # 容器里的工作目录
    working_dir: /home/zhangxffff/Workspace

    # 把宿主机目录映射进来：
    # - 默认把当前目录挂到 /workspace
    # - 如果你设置了 HOST_WORKDIR 环境变量，则用它
    volumes:
      - ~/Workspace:/home/zhangxffff/Workspace

    # 方便交互式使用（docker compose up / exec）
    tty: true
    stdin_open: true
